# Week 14 Learning Objectives

## Basic React Objectives

### Explain how React uses a tree data structure called the "virtual DOM" to model the DOM
- the virtual DOM is a model of the DOM that consists of react elements. by changing the state of this internal DOM model instead of the actual DOM, it allows dynamic changes to websites to happen more efficiently
### Use React.createElement to create virtual DOM nodes
```javascript
// React.createElement takes three parameters
React.createElement(
  type,
  [props],
  [...children]
)
// example with content
const navList = React.createElement(
  'ul',
  null,
  React.createElement(
    'li',
    { className: 'selected' },
    React.createElement('a', { href: '/pets'}, 'Pets'),
  ),
  React.createElement(
    'li',
    null,
    React.createElement('a', { href: '/owners'}, 'Owners'),
  ),
);
```
### Use ReactDOM.render to have React render your virtual DOM nodes into the actual Web page
```javascript
// Get a DOM node for React to render to
const mainElement = document.querySelector('main');

// ReactDOM.render takes two parameters, the react element, and the parent element
// from the actual DOM where it will be insterted
ReactDOM.render(navList, mainElement);
```
### Use JSX to create virtual DOM nodes
 - JSX allows you to get rid of React.createElement and replace it with HTML-esque tags
### Describe how JSX transforms into React.createElement calls
- tool called babble will do this automatically
 - single tag elements (e.g. `<img>`) will need a closing slash (e.g. `<img />`)
 - to pass in properties, add the properties to the tag for a react element
 - to get around automatic semicolon insertion, you
 ```javascript
 // in jsx
 <a href={props.searchUrl}>{props.searchText}</a>

// createElement equivalent
 React.createElement(
  'a',
  { href: props.searchUrl },
  props.searchText
)
 ```
### Use Array#map to create an array of virtual DOM nodes while specifying a unique key for each created virtual DOM node

## React Class Components Objectives
### Create a simple React application by removing items and content from a project generated by the Create React App default template
- `npx create-react-app project-name`
- remove `favicon.ico`, `robots.txt`, `logo192.png`, `logo512.png`, `manifest.json`, `App.css`,`App.test.js`, `logo.svg`, `serviceWorker.js`
`setupTests.js`
- simplify `index.html` to this:
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>React App</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
```
- simplify `App.js` to this:
```javascript
// ./src/App.js

import React from 'react';

function App() {
  return (
    <h1>Hello world!</h1>
  );
}

export default App;
```
- clear contents of `index.css`
- simplify `index.js` to this
```javascript
// ./src/index.js

import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';

ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  document.getElementById('root')
);
```
### Create a simple React application using a custom Create React App template
- `npx create-react-app project-name --template @appacademy/simple`
### Create a React component using ES2015 class syntax
- class components must extend `React.Component` and have a `render` method that returns the elements to render for the component
```javascript
// ./src/Message.js

import React from 'react';

class Message extends React.Component {
  constructor(props) {
    super(props); // don't do this i guess

    // TODO Initialize state, etc.
  }

  render() {
    return (
      <div>{this.props.text}</div>
    );
  }
}

export default Message;
```
### Describe when it's appropriate to use a class component
- when you want to add local or internal state to your component's lifecycle
- if a component doesn't need to use state or lifecycle methods, it should be written as a function component—and in fact there's a new feature (hooks) that allows function components to do everything class components can
### Initialize and update state within a class component
- props are provided when the component is called, state is internal to the component and can be updated or mutated by it
- state should only be used when it's absolutely necessary
### Provide default values for a class component's props
- same syntax, actually
```javascript
ClassComponentName.defaultProps = {
  propertyName: value
}
```
### Add event listeners to elements
- define a method to handle the event and associate that method with the element event you want to listen for
```javascript
// ./src/AlertButton.js

import React from 'react';

class AlertButton extends React.Component {
  showAlert = () => {
    window.alert('Button clicked!');
  }

  render() {
    return (
      <button type='button' onClick={this.showAlert}>Click Me</button>
    );
  }
}

export default AlertButton;
```
### Prevent event default behavior
- add a parameter to the anonymous method definition that will reference the event, so that you can call `preventDefault` on it
- the `e` parameter is a SyntheticEvent object type
```jsx
submitForm = (e) => {
  e.preventDefault();
  window.alert('Handling form submission...');
}
```
### Safely use the `this` keyword within event handlers
- `this` can be bound to the context of the object by defining the method on the component class as an anonymous function, or by using `.bind` to explicitly bind it
```jsx
// example with .bind
import React from 'react';

class AlertButton extends React.Component {
  constructor() {
    super();

    this.showAlert = this.showAlert.bind(this);
  }

  showAlert() {
    console.log(this);
  }

  render() {
    return (
      <button type='button' onClick={this.showAlert}>Click Me</button>
    );
  }
}

export default AlertButton;
```
### Describe what the React `SyntheticEvent` object is and the role it plays in handling events
- wraps the native browser event object to normalize events across browser vendors
- you can use synthetic event objects just like you would if they were the native browser event objects
- list of `SyntheticEvent` attributes:
```
boolean bubbles
boolean cancelable
DOMEventTarget currentTarget
boolean defaultPrevented
number eventPhase
boolean isTrusted
DOMEvent nativeEvent
void preventDefault()
boolean isDefaultPrevented()
void stopPropagation()
boolean isPropagationStopped()
void persist()
DOMEventTarget target
number timeStamp
string type
```
### Create a React class component containing a simple form
```javascript
// ./src/ContactUs.js

import React from 'react';

class ContactUs extends React.Component {
  render() {
    return (
      <div>
        <h2>Contact Us</h2>
        <form>
          <div>
            <label htmlFor='name'>Name:</label>
            <input id='name' type='text' />
          </div>
          <div>
            <label htmlFor='email'>Email:</label>
            <input id='email' type='text' />
          </div>
          <div>
            <label htmlFor='phone'>Phone:</label>
            <input id='phone' type='text' />
          </div>
          <div>
            <button>Submit</button>
          </div>
        </form>
      </div>
    );
  }
}

export default ContactUs;
```
### Define a single event handler method to handle `onChange` events for multiple `<input>` elements
### Add a `<textarea>` element to a form
### Add a `<select>` element to a form
### Implement form validations
### Describe the lifecycle of a React component
### Recall that the commonly used component lifecycle methods include `componentDidMount`, `componentDidUpdate`, and `componentWillUnmount`
### Use the componentDidMount component lifecycle method to fetch data from an API
- don't ever make asynchronous/ajax calls in the constructor
- those should be in the componentDidMount lifecycle method
- uncommon to overwrite componentDidUpdate lifecycle method
### Utilize official documentation to gain an understanding of how new technology works

```javascript
// stopwatch example
class Stopwatch extends React.Component {
  constructor() {
    super();
    this.state = {
      now: 0,
      running: false,
      start: 0,
    }
  }
  conponentDidMount() {
    console.log('mount')
  }
  componentDidUpdate() {
    console.log('update')
  }
  componentWillUnmount() {
    console.log('unmount')
    clearInterval(this.interval)
  }

  tick() {
    this.setState({
      now: new Date().valueOf(),
    });
  }

  toggle = () => {
    const running = !this.state.running;
    if (running) {
      this.interval = setInterval(() => this.tick(), 1000);
      this.setState({
        start: new Date().valueOf(),
      });
    } else {
      clearInteral(this.interval);
      this.interval = null;
    }
    this.setState({ running });
  }

  render() {
    return (
      <div>
        <p>{this.state.now - this.state.start) / 1000}</p>
        <button onClick={this.toggle}>
          { this.state.}
      </div>
    )
  }

}
```

## React Router Objectives

### Use the `react-router-dom` package to set up React Router in your applications
```zsh
npm install --save react-router-dom@^5.1.2
```
```javascript
import { BrowserRouter } from 'react-router-dom`;
```
### Create routes using the `<Route>` component from the react-router-dom package
```javascript
// ./src/index.js
import React from 'react';
import ReactDOM from 'react-dom';
import { BrowserRouter } from 'react-router-dom';
import App from './App';

const Root = () => {
  return (
    <BrowserRouter>
      <App />
    </BrowserRouter>
  );
};

ReactDOM.render(
  <React.StrictMode>
    <Root />
  </React.StrictMode>,
  document.getElementById('root'),
);
```
### Generate navigation links with the `<Link>` and `<NavLink>` components from the react-router-dom package
- `<Link>` or `<NavLink>` create links with absolute paths to routes in your application
- `<NavLink>` is a special version of the `<Link>` that will add styling attributes to the rendered element when it matches the current url
  - "activeClassName" and "activeStyle"
```javascript
// ./src/index.js
import React from 'react';
import ReactDOM from 'react-dom';
import { BrowserRouter, Route } from 'react-router-dom';
import App from './App';
import Users from './Users';

const Root = () => {
  return (
    <BrowserRouter>
      <div>
        <Route exact path='/' component={App} />
        <Route path='/users' component={Users} />
      </div>
    </BrowserRouter>
  );
};

ReactDOM.render(
  <React.StrictMode>
    <Root />
  </React.StrictMode>,
  document.getElementById('root'),
);
```
### Create `<Switch>` routes and manage the order of rendered components
- `<Switch>` component allows you to only render one `<Route>` even if several match the current url
- nest as many `Route`s as you wish between the opening and closing Switch tags, but only the first one that matches the current URL will be rendered.
- `to` prop provides destination, `onClick` provides click handling
### Use the React Router `match` prop to access router parameters
- component's props can also hold information about a url's parameters. the router will match route segments starting at `:` up to the next `/`, `?`, or `#`. matched values are passed to components via their props.
```jsx
//The router would break down the full /users/:userId/photos path to two parts: /users, :userId.
<Route path="/users/:userId"
       render={(props) => <Profile users={users} {...props} />} />
```
```jsx
// ./src/Profile.js
import React from "react";

const Profile = (props) => (
  <div>
    The user's id is {props.match.params.userId}.
  </div>
);

export default Profile;
```
- `isExact`: a boolean that tells you whether or not the URL exactly matches the path
- `url`: the current URL
- `path`: the route path it matched against (without wildcards filled in)
- `params`: the matches for the individual wildcard segments, nested under their names
### Use the React Router `history` prop to programmatically change the browser's URL
```jsx
// Pushing a new URL (and adding to the end of history stack):
const handleClick = () => this.props.history.push('/some/url');

// Replacing the current URL (won't be tracked in history stack):
const redirect = () => this.props.history.replace('/some/other/url');
```
### Redirect users by using the `<Redirect>` component in a route
- rendering a `<Redirect>` will navigate to a new location. new location will override the current location in the history stack, like server-side redirects (HTTP 3xx) do.
### Describe what nested routes are and how to create them
- you can create those routes and links within the user profile component, instead of creating the routes and links where the main routes are defined.
```jsx
// Destructure `match` prop
const Profile = ({ match: { url, path, params }) => {

  // Custom call to database to fetch a user by a user ID.
  const user = fetchUser(params.userId);
  const { name, id } = user;

  return (
    <div>
      <h1>Welcome to the profile of {name}!</h1>

      {/* Replaced `/users/${id}` URL with `props.match.url` */}
      <Link to={`${url}/posts`}>{name}'s Posts</Link>
      <Link to={`${url}/photos`}>{name}'s Photos</Link>

      {/* Replaced `/users/:userId` path with `props.match.path` */}
      <Route path={`${path}/posts`} component={UserPosts} />
      <Route path={`${path}/photos`} component={UserPhotos} />
    </div>}
  );
};
```
```jsx
// example 2 from docs
const App = () => (
  <BrowserRouter>
    {/* here's a div */}
    <div>
      {/* here's a Route */}
      <Route path="/tacos" component={Tacos} />
    </div>
  </BrowserRouter>
);

// when the url matches `/tacos` this component renders
const Tacos = ({ match }) => (
  // here's a nested div
  <div>
    {/* here's a nested Route,
        match.url helps us make a relative path */}
    <Route path={match.url + "/carnitas"} component={Carnitas} />
  </div>
);
```

## React Builds Objectives

### Describe what frontend builds are and why they're needed
- several necessary steps for converting files to optimize user experience (as opposed to the dev experience)
  - linting: process of using a tool to analyze your code to catch common programming errors, bugs, stylistic inconsistencies, and suspicious coding patterns.
  - transpilation: converting source code (in this case javascript and jsx) from one version to another version that is widely supported
  - minification: process of removing all unnecessary characters in your code
  - bundling: process of combining multiple code files into a single file
  - tree shaking: process of removing unused (or dead) code from your application before it's bundled
### Describe at a high level what happens in a Create React App when you run `npm start`
- environment variables are loaded;
- list of browsers to support are checked
- The configured HTTP port is checked to ensure that it's available;
- The application compiler is configured and created;
- webpack-dev-server is started;
- webpack-dev-server compiles your application;
- The index.html file is loaded into the browser; and
- A file watcher is started to watch your files, waiting for changes.
### Prepare to deploy a React application into a production environment
- don't have private env variables in your front end—they won't be hidden anymore after build.
- configure supported browsers
- run `npm run build`

## React Context Objectives

### Use Context to share and manage global information within a React application
### Create a wrapper component with `Context.Provider` to set a component's default context
### Create a wrapper component with `Context.Consumer` to share the global context through render props
### Create and pass a method through Context to update the global state from a nested component
